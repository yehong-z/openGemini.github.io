import{_ as d,X as u,Y as m,Z as s,a1 as n,$ as e,a0 as a,a3 as v,C as p}from"./framework-a4aa538b.js";const k={},b=s("h1",{id:"手动安装",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#手动安装","aria-hidden":"true"},"#"),n(" 手动安装")],-1),g=s("p",null,"本指南介绍如何快速上手体验 openGemini时序数据库。对于非生产环境，你可以选择以下任意一种方式部署openGemini时序数据库。",-1),h=s("h2",{id:"安装",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#安装","aria-hidden":"true"},"#"),n(" 安装")],-1),_={href:"https://github.com/openGemini/openGemini/releases",target:"_blank",rel:"noopener noreferrer"},f=s("blockquote",null,[s("p",null,[n("请将 "),s("strong",null,[s("code",null,"<version>")]),n(" 替换为下载的安装包版本")])],-1),x=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"wget"),n(" https://github.com/openGemini/openGemini/releases/download/v"),s("span",{class:"token operator"},"<"),n("version"),s("span",{class:"token operator"},">"),n("/openGemini-"),s("span",{class:"token operator"},"<"),n("version"),s("span",{class:"token operator"},">"),n(`-linux-amd64.tar.gz
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),w=s("p",null,"也可以通过手动下载对应的安装包。",-1),G=s("li",null,[s("p",null,[n("进入到安装包所在目录，使用 "),s("code",null,"tar"),n(" 解压安装包；")]),s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"mkdir"),n(` openGemini
`),s("span",{class:"token function"},"tar"),n(),s("span",{class:"token parameter variable"},"-zxvf"),n(" openGemini-"),s("span",{class:"token operator"},"<"),n("version"),s("span",{class:"token operator"},">"),n("-linux-amd64.tar.gz "),s("span",{class:"token parameter variable"},"-C"),n(` openGemini
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("p",null,[s("code",null,"ts-server"),n("就是单机版本的二进制，"),s("code",null,"openGemini.singlenode.conf"),n("是适用于"),s("code",null,"ts-server"),n("的配置文件。")])],-1),q={href:"https://github.com/openGemini/openGemini/releases",target:"_blank",rel:"noopener noreferrer"},y=s("blockquote",null,[s("p",null,[n("请将 "),s("strong",null,[s("code",null,"<version>")]),n(" 替换为下载的安装包版本")])],-1),E=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"wget"),n(" https://github.com/openGemini/openGemini/releases/download/v"),s("span",{class:"token operator"},"<"),n("version"),s("span",{class:"token operator"},">"),n("/openGemini-"),s("span",{class:"token operator"},"<"),n("version"),s("span",{class:"token operator"},">"),n(`-linux-arm64.tar.gz
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),O=s("p",null,"也可以通过手动下载对应的安装包。",-1),z=s("li",null,[s("p",null,[n("进入到安装包所在目录，使用 "),s("code",null,"tar"),n(" 解压安装包；")]),s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"mkdir"),n(` openGemini
`),s("span",{class:"token function"},"tar"),n(),s("span",{class:"token parameter variable"},"-zxvf"),n(" openGemini-"),s("span",{class:"token operator"},"<"),n("version"),s("span",{class:"token operator"},">"),n("-linux-arm64.tar.gz "),s("span",{class:"token parameter variable"},"-C"),n(` openGemini
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("p",null,[s("code",null,"ts-server"),n("就是单机版本的二进制，"),s("code",null,"openGemini.singlenode.conf"),n("是适用于"),s("code",null,"ts-server"),n("的配置文件。")])],-1),L=s("p",null,"当前，openGemini 安装包仅添加到openEuler镜像源中，其他Linux操作系统正在进一步完善中",-1),A=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[n("yum "),s("span",{class:"token function"},"install"),n(` openGemini
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),C=s("p",null,"自动安装成功后，openGemini全部二进制存放位置为/usr/bin，配置文件存放位置为 /etc/openGemini",-1),B=s("p",null,[s("strong",null,"编译环境信息")],-1),N={href:"https://go.dev/dl/",target:"_blank",rel:"noopener noreferrer"},R={href:"https://www.python.org/downloads/",target:"_blank",rel:"noopener noreferrer"},T={href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"},D=s("p",null,[s("strong",null,"GO环境变量设置")],-1),H=s("p",null,[n("打开 "),s("code",null,"~/.profile"),n("配置文件，在文件末尾添加如下配置：")],-1),P=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token comment"},"# 设置GOPATH(需自定义目录)"),n(`
`),s("span",{class:"token builtin class-name"},"export"),n(),s("span",{class:"token assign-left variable"},"GOPATH"),s("span",{class:"token operator"},"="),n(`/path/to/dir
`),s("span",{class:"token comment"},"# 设置国内代理"),n(`
`),s("span",{class:"token builtin class-name"},"export"),n(),s("span",{class:"token assign-left variable"},"GOPROXY"),s("span",{class:"token operator"},"="),n(`https://goproxy.cn,direct
`),s("span",{class:"token comment"},"# 开启go mod模式"),n(`
`),s("span",{class:"token builtin class-name"},"export"),n(),s("span",{class:"token assign-left variable"},"GO111MODULE"),s("span",{class:"token operator"},"="),n(`on
`),s("span",{class:"token builtin class-name"},"export"),n(),s("span",{class:"token assign-left variable"},"GONOSUMDB"),s("span",{class:"token operator"},"="),n(`*
`),s("span",{class:"token builtin class-name"},"export"),n(),s("span",{class:"token assign-left variable"},"GOSUMDB"),s("span",{class:"token operator"},"="),n(`off
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),V=s("p",null,[s("strong",null,"下载源码")],-1),I=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"git"),n(` clone https://github.com/openGemini/openGemini.git
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),M=s("p",null,[s("strong",null,"进入主目录")],-1),S=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token builtin class-name"},"cd"),n(` openGemini
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),U=s("p",null,[s("strong",null,"编译")],-1),X=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[n("python3 build.py "),s("span",{class:"token parameter variable"},"--clean"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),Y=s("p",null,[n("编译成功后，二进制保存在"),s("code",null,"build"),n("目录中。")],-1),Z=s("p",null,[s("strong",null,"运行单机版")],-1),$=s("div",{class:"language-bash line-numbers-mode","data-ext":"sh"},[s("pre",{class:"language-bash"},[s("code",null,[s("span",{class:"token function"},"bash"),n(` ./scripts/install.sh
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),j=v(`<h2 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h2><p><strong>进入 ts-server 所在文件夹后，执行</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./ts-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p><code>v1.0.1</code>及以前版本，运行<code>ts-server</code>需要指定配置文件启动：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./ts-server <span class="token parameter variable">-config</span> /path/to/openGemini.singlenode.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如需后台启动：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">nohup</span> ./ts-server <span class="token operator">&gt;</span> server_extra.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h2 id="opengemini-命令行-ts-cli" tabindex="-1"><a class="header-anchor" href="#opengemini-命令行-ts-cli" aria-hidden="true">#</a> openGemini 命令行（ts-cli）</h2><p>为便于执行数据库（Database）的各种查询，openGemini 提供一命令行应用程序（以下简称为 openGemini CLI）ts-cli。要进入 openGemini 命令行，您只要进入<code>ts-cli</code>所在目录，在终端执行<code>ts-cli</code> 即可。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./ts-cli
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>默认连接127.0.0.1:8086，可通过以下命令连接其他主机：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./ts-cli <span class="token parameter variable">-host</span> <span class="token number">192.168</span>.0.1 <span class="token parameter variable">-port</span> <span class="token number">8086</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>更多用法请使用如下命令，自行探索：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./ts-cli <span class="token parameter variable">-h</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h2 id="基本操作" tabindex="-1"><a class="header-anchor" href="#基本操作" aria-hidden="true">#</a> 基本操作</h2><p><strong>创建数据库</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> db0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>查看数据库</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>运行效果</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> db0
Elapsed: <span class="token number">1.446074</span>ms
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">show</span> <span class="token keyword">databases</span>
name: <span class="token keyword">databases</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token operator">|</span> name <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token operator">|</span> db0  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+</span>
<span class="token number">1</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>

Elapsed: <span class="token number">2.178147</span>ms
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用数据库</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">use</span> db0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>写数据</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">insert</span> cpu_load<span class="token punctuation">,</span>host<span class="token operator">=</span><span class="token string">&quot;server-01&quot;</span><span class="token punctuation">,</span>region<span class="token operator">=</span><span class="token string">&quot;west_cn&quot;</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token number">75.3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>查看表</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">show</span> measurements
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>查询数据</strong></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> cpu_load
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>运行效果</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">use</span> db0
Elapsed: <span class="token number">251</span>ns
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">insert</span> cpu_load<span class="token punctuation">,</span>host<span class="token operator">=</span><span class="token string">&quot;server-01&quot;</span><span class="token punctuation">,</span>region<span class="token operator">=</span><span class="token string">&quot;west_cn&quot;</span> <span class="token keyword">value</span><span class="token operator">=</span><span class="token number">75.3</span>
Elapsed: <span class="token number">162.328339</span>ms
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">show</span> measurements
name: measurements
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token operator">|</span> name     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token operator">|</span> cpu_load <span class="token operator">|</span>
<span class="token operator">|</span> mst      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token number">1</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>

Elapsed: <span class="token number">13.374945</span>ms
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> cpu_load
name: cpu_load
<span class="token operator">+</span><span class="token comment">---------------------+-------------+-----------+-------+</span>
<span class="token operator">|</span> <span class="token keyword">time</span>                <span class="token operator">|</span> host        <span class="token operator">|</span> region    <span class="token operator">|</span> <span class="token keyword">value</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+-------------+-----------+-------+</span>
<span class="token operator">|</span> <span class="token number">1681483835745490423</span> <span class="token operator">|</span> <span class="token string">&quot;server-01&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;west_cn&quot;</span> <span class="token operator">|</span> <span class="token number">75.3</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+-------------+-----------+-------+</span>
<span class="token number">4</span> <span class="token keyword">columns</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span>

Elapsed: <span class="token number">3.259995</span>ms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项" aria-hidden="true">#</a> 注意事项</h2><p><code>ts-server</code>为openGemini的单机版二进制文件，可简单理解为<code>ts-server</code>由一个<code>ts-sql</code>、一个<code>ts-meta</code>和一个<code>ts-store</code>组成。 注意事项：</p>`,27),F=s("code",null,"openGemini.singlenode.conf",-1),J=s("li",null,[n("默认配置文件中数据、日志等默认保存在"),s("code",null,"/tmp/openGemini"),n("目录下，建议替换为其他目录，确保有足够的存储空间。如果使用的"),s("code",null,"scripts/install.sh"),n("脚本启动，还需要对应修改脚本中的"),s("code",null,"/tmp/"),n("目录。")],-1);function K(Q,W){const o=p("RouterLink"),l=p("ExternalLinkIcon"),c=p("Tabs");return u(),m("div",null,[b,g,s("p",null,[n("本指南以单机部署为例，如需了解集群部署，请点击"),e(o,{to:"/zh/guide/quick_start/deploy_cluster.html"},{default:a(()=>[n("集群部署")]),_:1}),n("查看详细步骤。")]),h,e(c,{id:"12",data:[{title:"Linux-x86"},{title:"Linux-arm"},{title:"openEuler"},{title:"源码编译"}]},{tab0:a(({title:t,value:i,isActive:r})=>[s("ol",null,[s("li",null,[s("p",null,[n("可以到"),s("a",_,[n("GitHub Release"),e(l)]),n("页面复制最新版本链接")]),f,x,w]),G])]),tab1:a(({title:t,value:i,isActive:r})=>[s("ol",null,[s("li",null,[s("p",null,[n("可以到"),s("a",q,[n("GitHub Release"),e(l)]),n("页面复制最新版本链接")]),y,E,O]),z])]),tab2:a(({title:t,value:i,isActive:r})=>[L,A,C]),tab3:a(({title:t,value:i,isActive:r})=>[B,s("ul",null,[s("li",null,[s("a",N,[n("GO"),e(l)]),n(" version v1.18+")]),s("li",null,[s("a",R,[n("Python"),e(l)]),n(" version v3.7+")]),s("li",null,[s("a",T,[n("Git"),e(l)])])]),D,H,P,V,I,M,S,U,X,Y,Z,$]),_:1}),j,s("ol",null,[s("li",null,[n("如果默认配置不能满足需求，需要使用配置文件"),F,n("启动，完整的配置项和含义参考"),e(o,{to:"/zh/guide/manage/configurations.html"},{default:a(()=>[n("管理-配置项")]),_:1}),n("章节。")]),J,s("li",null,[n("如果启动过程中发现端口已占用，可以修改配置文件中的默认端口。所有端口用途请参考"),e(o,{to:"/zh/guide/manage/ports.html"},{default:a(()=>[n("管理-端口矩阵")]),_:1}),n("章节。")])])])}const ns=d(k,[["render",K],["__file","get_started.html.vue"]]);export{ns as default};
