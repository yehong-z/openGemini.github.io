import{_ as e,X as t,Y as p,Z as o,a1 as s,$ as l,a0 as r,a3 as n,C as c}from"./framework-a4aa538b.js";const i={},d=n('<h1 id="select" tabindex="-1"><a class="header-anchor" href="#select" aria-hidden="true">#</a> SELECT</h1><p><code>SELECT</code> 查询执行数据检索。 默认情况下，请求的数据将返回给客户端，同时结合 <a href="">SELECT INTO</a> 可以被转发到不同的表。</p><h2 id="样本数据" tabindex="-1"><a class="header-anchor" href="#样本数据" aria-hidden="true">#</a> 样本数据</h2>',3),u=n(`<p>以下部分中的示例查询均按照上诉样本数据进行操作。</p><h2 id="客户端" tabindex="-1"><a class="header-anchor" href="#客户端" aria-hidden="true">#</a> 客户端</h2><p>为了方便探索数据，请先用ts-cli登录：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ts-cli <span class="token parameter variable">-database</span> NOAA_water_database
openGemini CLI <span class="token number">0.1</span>.0 <span class="token punctuation">(</span>rev-revision<span class="token punctuation">)</span>
Please use <span class="token variable"><span class="token variable">\`</span>quit<span class="token variable">\`</span></span>, <span class="token variable"><span class="token variable">\`</span><span class="token builtin class-name">exit</span><span class="token variable">\`</span></span> or <span class="token variable"><span class="token variable">\`</span>Ctrl-D<span class="token variable">\`</span></span> to <span class="token builtin class-name">exit</span> this program.
<span class="token operator">&gt;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="语法" tabindex="-1"><a class="header-anchor" href="#语法" aria-hidden="true">#</a> 语法</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span> COLUMN_CLAUSES FROM_CLAUSE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="select子句" tabindex="-1"><a class="header-anchor" href="#select子句" aria-hidden="true">#</a> SELECT子句</h2><p><code>SELECT</code> 子句支持下面的格式:</p><table><thead><tr><th>格式</th><th>含义</th></tr></thead><tbody><tr><td><code>SELECT *</code></td><td>返回所有的tag和field</td></tr><tr><td><code>SELECT &quot;&lt;field_key&gt;&quot;</code></td><td>返回指定的field</td></tr><tr><td><code>SELECT &quot;&lt;field_key&gt;&quot;,&quot;&lt;field_key&gt;&quot;</code></td><td>返回多个指定的field</td></tr><tr><td><code>SELECT &quot;&lt;field_key&gt;&quot;,&quot;&lt;tag_key&gt;&quot;</code></td><td>返回指定的field和tag。如果指定了tag，则必须指定至少一个field</td></tr><tr><td><code>SELECT &quot;&lt;field_key&gt;&quot;::field,&quot;&lt;tag_key&gt;&quot;::tag</code></td><td>返回特定field和tag。 ::[field | tag] 语法指定标识符类型。使用此语法区分具有相同名称的field和tag</td></tr></tbody></table><p>其他支持的功能： <a href="">数学表达式</a>、 <a href="">聚合算子</a>、 <a href="">正则表达式</a></p><div class="hint-container tip"><p class="hint-container-title">Tips</p><p>SELECT 语句不能同时包含<mark>聚合函数</mark><strong>和</strong><mark>非聚合函数、field_key或tag_key</mark>。</p></div><h2 id="from子句" tabindex="-1"><a class="header-anchor" href="#from子句" aria-hidden="true">#</a> FROM子句</h2><p><code>FROM</code> 子句指定从以下数据源中读取数据:</p><ul><li>表</li><li>子查询</li></ul><p>支持的格式：</p><table><thead><tr><th>格式</th><th>含义</th></tr></thead><tbody><tr><td><code>FROM &lt;measurement_name&gt;</code></td><td>从单个表中获取数据</td></tr><tr><td><code>FROM &lt;measurement_name&gt;,&lt;measurement_name&gt;</code></td><td>从多个表中获取数据</td></tr><tr><td><code>FROM &lt;database_name&gt;.&lt;retention_policy_name&gt;.&lt;measurement_name&gt;</code></td><td>从指定的database，指定的retention_policy，指定的表中获取数据</td></tr><tr><td><code>FROM &lt;database_name&gt;..&lt;measurement_name&gt;</code></td><td>从指定的database，默认的retention_policy，指定的表中获取数据</td></tr><tr><td><code>FROM /&lt;regular_expression_measurement&gt;/</code></td><td>用正则表达式匹配对应的表，获取数据</td></tr></tbody></table><h2 id="例子" tabindex="-1"><a class="header-anchor" href="#例子" aria-hidden="true">#</a> 例子</h2><p>从一个表中查询的所有的field和tags。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token keyword">time</span>                 <span class="token keyword">level</span> description         location     water_level
<span class="token comment">----                 -----------------         --------     -----------</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z below <span class="token number">3</span> feet              santa_monica <span class="token number">2.064</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token operator">between</span> <span class="token number">6</span> <span class="token operator">and</span> <span class="token number">9</span> feet      coyote_creek <span class="token number">8.12</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span>T00:<span class="token number">06</span>:<span class="token number">00</span>Z below <span class="token number">3</span> feet              santa_monica <span class="token number">2.116</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">30</span>:<span class="token number">00</span>Z <span class="token operator">between</span> <span class="token number">3</span> <span class="token operator">and</span> <span class="token number">6</span> feet      santa_monica <span class="token number">5.01</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">36</span>:<span class="token number">00</span>Z <span class="token operator">between</span> <span class="token number">3</span> <span class="token operator">and</span> <span class="token number">6</span> feet      santa_monica <span class="token number">5.066</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">42</span>:<span class="token number">00</span>Z <span class="token operator">between</span> <span class="token number">3</span> <span class="token operator">and</span> <span class="token number">6</span> feet      santa_monica <span class="token number">4.938</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从一个表查询指定field的top 5数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">top</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token keyword">time</span>                 <span class="token keyword">top</span>
<span class="token comment">----                 ---</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">12</span>:<span class="token number">00</span>Z <span class="token number">9.938</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">18</span>:<span class="token number">00</span>Z <span class="token number">9.957</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">24</span>:<span class="token number">00</span>Z <span class="token number">9.964</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">30</span>:<span class="token number">00</span>Z <span class="token number">9.954</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">28</span>T07:<span class="token number">36</span>:<span class="token number">00</span>Z <span class="token number">9.941</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从一个表中查询最新的一条记录并查询对应tag。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">last</span><span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> location <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span>
name: h2o_feet
<span class="token keyword">time</span>                 <span class="token keyword">last</span>  location
<span class="token comment">----                 ----  --------</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">42</span>:<span class="token number">00</span>Z <span class="token number">4.938</span> santa_monica
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从一个表中查询所有数据并做一些基础运算。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token punctuation">(</span><span class="token string">&quot;water_level&quot;</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token keyword">FROM</span> <span class="token string">&quot;h2o_feet&quot;</span> <span class="token keyword">limit</span> <span class="token number">10</span>
name: h2o_feet
<span class="token keyword">time</span>                 water_level
<span class="token comment">----                 -----------</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token number">10.256</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span>T00:<span class="token number">00</span>:<span class="token number">00</span>Z <span class="token number">34.48</span>
<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">36</span>:<span class="token number">00</span>Z <span class="token number">22.264</span>
<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">17</span>T21:<span class="token number">42</span>:<span class="token number">00</span>Z <span class="token number">21.752</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,25);function k(m,b){const a=c("RouterLink");return t(),p("div",null,[d,o("p",null,[s("开始探索数据之前，为了更好地演示下面的语法，我们先导入美国国家海洋和大气管理局 (NOAA) 业务海洋产品和服务中心的公开可用数据，请先按照"),l(a,{to:"/guide/geminiql/sample_data.html"},{default:r(()=>[s("样本数据")]),_:1}),s("文档录入数据。")]),u])}const h=e(i,[["render",k],["__file","select.html.vue"]]);export{h as default};
